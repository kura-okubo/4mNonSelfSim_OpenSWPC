# Minimum working example for ball-drop source with rock specimen

This example performs a forward modeling of the wave propagation generated by ball-drop impact (single force) in a rock specimen.

## Local test environment

> The following is noted only for the compilation of the extended version forked from v5.1.0. See [the latest original document](https://openswpc.github.io/1._SetUp/0103_compile/#specifying-compiler-options) for installation of the latest OpenSWPC. 

- Mac mini (M1, 2020)
- macOS Version 15.4.1 (24E263) as of April 27, 2025

```sh
brew install openmpi netcdf-fortran zlib
```

| package | version |
| --- | --- |
| Homebrew | v4.4.27 |
| open-mpi | v5.0.7 |
| netCDF | v4.9.3 |
| netCDF-fortran | v4.6.1 |
| GNU Fortran (Homebrew GCC 14.2.0_1)| 14.2.0 |

To compile the software, run the following in the `src` directory:
```sh
cd src
mkdir ../bin
make arch=mac-gfortran-new
```

> Tips:  Updating Xcode to Version 16.2 (16C5032a) was needed to compile the software.

> If the `netcdf` library is not found, configure the paths defined in the `FFLAGS`, `NCLIB`, and `NCINC` variables in the `src/shared/makefile.arch` and `src/shared/makefile-tools.arch` files.

## How to run
Move to `example_balldrop` and execute `sh run_example.sh`.

```sh
cd ../example_balldrop
sh run_example.sh
```

## Description
Drop a 2 mm diameter steel ball from a height of 0.5 m onto a rock sample measuring 400 × 220 × 120 mm.

## Result

Open the notebook: [example_balldrop_result.ipynb](./example_balldrop_result.ipynb).

